<div class="card">
  <div class="card-body">
    <div class="form-row">  
      <div class="col-3 form-group mb-0">
        <label for="baseCurrency">Waluta bazowa:</label>
        <select
          class="form-control"
          id="baseCurrency"
          [(ngModel)]="selectedBaseCurrency"
          (change)="getRates()"
          [disabled]="loading"
        >
          <option
            *ngFor="let currency of availableCurrencies"
            [value]="currency.code"
          >
            {{ currency.name }} ({{ currency.code }})
          </option>
        </select>
      </div>
      <div class="col-9 form-group mb-0">
        <label for="currencyAmount">Ilość pieniędzy:</label>
        <input
          class="form-control"  
          id="currencyAmount"
          type="number"
          step="0.5"
          [(ngModel)]="moneyAmount"
          [disabled]="loading"
        >
      </div>
    </div>
  </div>
</div>

<div *ngIf="!loading; else loadingScreen">
  <table class="table table-bordered mt-4">
    <thead class="thead-light">
      <tr>
        <td colspan="2">
          <input
            class="form-control"
            type="text"
            placeholder="Wyszukaj..."
			      [(ngModel)]="searchPhrase"
            (input)="searchPhraseChange()"
          >
        </td>
      </tr>
      <tr>
        <th scope="col">Waluta</th>
        <th scope="col">Ilość</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let rate of filteredRates">
        <td>{{ rate.code }}</td>
        <td>{{ (moneyAmount * rate.value).toFixed(2) }}</td>
      </tr>
      <tr *ngIf="!filteredRates.length">
        <td colspan="2">
          Brak elementów spełniających kryteria wyszukiwania.
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #loadingScreen>
  <div class="text-center m-5">
    <div class="spinner-border" role="status">
      <span class="sr-only">Loading...</span>
    </div>
    <span class="d-block">Wczytywanie danych...</span>
  </div>
</ng-template>